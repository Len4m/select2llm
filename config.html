<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Select2LLM</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="pure-min.css">
    <link rel="stylesheet" href="config.css">
</head>

<body>
    <div class="flex-container">
        <div class="flex-items"><img src="images/logo-claro.png" class="logo"></div>
        <div class="flex-items">
            <p style="margin:0;padding:0;font-size:12px;">Author: Lenam<br>
                <span id="author-link">len4m.github.io</span>
            </p>
        </div>
    </div>

    <div style="padding:0 15px;">
        <div class="ollama-alert">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="#FFFFFF" stroke-width="2" fill="none" />
                <path d="M12 7v6" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" />
                <circle cx="12" cy="17" r="1" fill="#FFFFFF" />
            </svg>
            <div class="message" data-i18n-lan="es">No se ha encontrado la API de Ollama. Asegúrese de tener Ollama
                instalado (<span class="ollama-download-link">ollama.com/download</span>) y de que el host esté
                correctamente
                configurado en la <span class="global-settings-btn">configuración global</span>.</div>
            <div class="message" data-i18n-lan="ca">No s'ha trobat l'API d'Ollama. Assegureu-vos de tenir Ollama
                instal·lat (<span class="ollama-download-link">ollama.com/download</span>) i que l'host estigui
                correctament
                configurat a la <span class="global-settings-btn">configuració global</span>.</div>
            <div class="message" data-i18n-lan="en">Ollama API not found. Make sure you have Ollama
                installed (<span class="ollama-download-link">ollama.com/download</span>) and that the host is correctly
                configured in <span class="global-settings-btn">global settings</span>.</div>

            <div style="clear:both"></div>
        </div>


        <h3 style="margin:0px 0px 15px 0px;" data-i18n="Listado de atajos"></h3>
        <ul id="shortcuts-list">
            <li data-i18n="Cargando ..."></li>
        </ul>
    </div>
    
    <!-- Botón para añadir nuevo atajo -->
    <div class="button-container">
        <button id="add-shortcut-btn" class="pure-button pure-button-primary">
            <img src="images/math-plus-icon.png" alt="">
            <span data-i18n="Añadir Nuevo Atajo">Añadir Nuevo Atajo</span>
        </button>
        <a href="#" id="global-settings-id-btn" class="global-settings-btn">
            <img src="images/settings-icon.png" alt="">
            <span data-i18n="Configuración global">Configuración global</span>
        </a>
    </div>

    <!-- Modal para configurar atajos -->
    <div id="shortcut-modal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2 class="modal-title" id="shortcut-modal-title">
                    <img id="shortcut-modal-icon" src="images/math-plus-icon.png" alt="">
                    <span data-i18n="Configuración de atajos"></span>
                </h2>
                <button class="modal-close shortcut-modal-close" type="button">
                    <img src="images/close-icon.png" alt="Cerrar">
                </button>
            </div>
            
            <div class="modal-body">
                <form id="shortcut-form">
                    <input type="hidden" name="index" id="index" value="">
                    
                    <div class="form-group">
                        <label class="form-label required" data-i18n="Combinación de teclas">Combinación de teclas</label>
                        <div class="config-short">
                            <div class="key-check">
                                <input type="checkbox" id="ctrl" name="ctrl" checked>
                                <label for="ctrl"><img id="ctrl-button" src="images/ctrl-control-button-icon.png"></label>
                            </div>
                            <div class="key-check">
                                <input type="checkbox" id="alt" name="alt" checked>
                                <label for="alt"><img src="images/alt-button-icon.png"></label>
                            </div>
                            <div class="key-check">
                                <input type="checkbox" id="shift" name="shift" checked>
                                <label for="shift"><img src="images/shift-button-icon.png"></label>
                            </div>
                            <img src="images/math-plus-icon.png" style="height: 18px;width:auto;">

                            <label>
                                <input type="text" id="key" name="key" class="form-input" style="max-width:42px;font-weight: bold;" maxlength="1"
                                    pattern="[a-zA-Z0-9\+\-.,¡'/*]" required>
                                <small data-i18n="Tecla (alfanumérica o +-.,¡'/*)"></small>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" for="model" data-i18n="Modelo">Modelo</label>
                        <select id="model" name="model" class="form-select" required></select>
                    </div>

                    <div class="form-group">
                        <label class="form-label required" for="prompt" data-i18n="Prompt">Prompt</label>
                        <textarea id="prompt" name="prompt" class="form-textarea" rows="4" 
                            placeholder="Escribe tu prompt aquí. El texto seleccionado se añadirá automáticamente."></textarea>
                        <span class="form-help" data-i18n="El texto seleccionado se añadirá al final del prompt">El texto seleccionado se añadirá al final del prompt</span>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="temperature">
                            <span data-i18n="Temperatura">Temperatura</span> (<span id="temperatura-span"></span>)
                        </label>
                        <input oninput="document.getElementById('temperatura-span').innerText = this.value" 
                            type="range" min="0" max="1" step="0.01" id="temperature" name="temperature" required>
                    </div>

                    <div class="form-group">
                        <div class="form-checkbox" onclick="document.getElementById('overlay').checked = !document.getElementById('overlay').checked">
                            <input type="checkbox" id="overlay" name="overlay" checked>
                            <label for="overlay" data-i18n="Ventana superpuesta">Ventana superpuesta</label>
                        </div>
                        <span class="form-help" data-i18n="Mostrar una ventana superpuesta mientras se genera la respuesta">Mostrar una ventana superpuesta mientras se genera la respuesta</span>
                    </div>
                </form>
            </div>
            
            <div class="modal-footer">
                <button id="cancel-btn" type="button" class="pure-button pure-button-secondary" data-i18n="Cancelar">Cancelar</button>
                <div class="modal-actions">
                    <button id="add-btn" type="submit" form="shortcut-form" class="pure-button pure-button-primary" data-i18n="Agregar">Agregar</button>
                    <button id="edit-btn" type="submit" form="shortcut-form" class="pure-button pure-button-primary" data-i18n="Editar">Editar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="del-confirm" class="confirm">
        <div>
            <p data-i18n="Seguro que quiere eliminar el atajo?"></p>
            <button class="button-error pure-button" id="accept-confirm" data-index="0"
                data-i18n="Eliminar atajo"></button>
            <button class="pure-button-secondary pure-button"
                onclick="document.getElementById('del-confirm').style.display = '';" data-i18n="Cancelar"></button>
        </div>
    </div>

    <div id="global-config" class="modal">
        <div class="modal-content medium">
            <div class="modal-header">
                <h2 class="modal-title">
                    <img src="images/settings-icon.png" alt="">
                    <span data-i18n="Configuración global"></span>
                </h2>
                <button class="modal-close global-config-close" type="button">
                    <img src="images/close-icon.png" alt="Cerrar">
                </button>
            </div>
            
            <div class="modal-body">
                <form id="global-config-form">
                    <div class="form-group">
                        <label class="form-label" for="global-config-language" data-i18n="Idioma"></label>
                        <select id="global-config-language" name="language" class="form-select">
                            <option value="es">Español</option>
                            <option value="en">English</option>
                            <option value="ca">Català</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="global-config-theme" data-i18n="Tema de Interfaz">Tema de Interfaz</label>
                        <select id="global-config-theme" name="theme" class="form-select">
                            <option value="light" data-i18n="Claro">Claro</option>
                            <option value="dark" data-i18n="Oscuro">Oscuro</option>
                        </select>
                        <span class="form-help" data-i18n="Selecciona el tema visual de la aplicación">Selecciona el tema visual de la aplicación</span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="global-config-zoom">
                            <span data-i18n="Zoom de Interfaz"></span> (<span id="global-config-zoom-span">--</span>%)
                        </label>
                        <input oninput="document.getElementById('global-config-zoom-span').innerText = this.value"
                            onmouseup="updateZoom(this.value)" onchange="updateZoom(this.value)" onkeyup="updateZoom(this.value)"
                            type="range" id="global-config-zoom" name="uiZoom" required>
                        <span class="form-help" data-i18n="Controla el tamaño de la interfaz de configuración"></span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="global-config-temperature">
                            <span data-i18n="Temperatura"></span> (<span id="global-config-temperatura-span">0.8</span>)
                        </label>
                        <input oninput="document.getElementById('global-config-temperatura-span').innerText = this.value"
                            type="range" min="0" max="1" step="0.01" value="0.8" id="global-config-temperature"
                            name="temperature" required>
                        <span class="form-help" data-i18n="Configuración por defecto por los nuevos atajos"></span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="global-config-keep-alive">
                            <span data-i18n="Keep Alive"></span> (<span id="global-config-keep-alive-span">5</span>
                            <span data-i18n="minutos">minutos</span>)
                        </label>
                        <input oninput="document.getElementById('global-config-keep-alive-span').innerText = this.value"
                            type="number" min="1" max="1440" step="1" value="5" id="global-config-keep-alive"
                            name="keep-alive" required class="form-input">
                        <span class="form-help" data-i18n="Controla cuánto tiempo el modelo permanecerá cargado en la memoria después de la solicitud"></span>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="global-config-host" data-i18n="Ollama API Host"></label>
                        <div class="form-row">
                            <div class="form-group">
                                <input placeholder="http://127.0.0.1:11434" type="url" name="host"
                                    id="global-config-host" value="http://127.0.0.1:11434" class="form-input">
                            </div>
                            <button type="button" id="restart-button" class="pure-button pure-button-primary"
                                style="background-color: var(--warning); min-width: 100px;" disabled data-i18n="Reiniciar">Reiniciar</button>
                        </div>
                        <div id="host-change-warning" style="display: none; background-color: var(--surface-hover); border: 1px solid var(--border); border-radius: 4px; padding: 10px; margin-top: 8px; color: var(--text-secondary);">
                            <strong data-i18n="⚠️ Atención:">⚠️ Atención:</strong>
                            <span data-i18n="Al modificar el host de Ollama, necesitas reiniciar la aplicación para que los cambios tengan efecto.">Al modificar el host de Ollama, necesitas reiniciar la aplicación para que los cambios tengan efecto.</span>
                        </div>
                        <span class="form-help" data-i18n="Si tiene Ollama instalado en local, puede dejarlo en blanco."></span>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <template id="prompts-items" style="display:none;">
        <li class="atajo-li">
            <div class="atajo-atajo"></div>
            <span class="atajo-model"></span> (Temp. <span class="atajo-temp"></span>)
            <p></p>
        </li>
    </template>


    <script src="config.js"></script>
</body>

</html>